<html layout:decorate="~{layout}">
	<div layout:fragment="content" class="container mt-5 my-5">
	    <div class="row g-5 mt-5">
	        <!-- 왼쪽: 이미지 영역 -->
	        <div class="col-md-6">
	            <img th:src="@{'/Images/' + ${product.fileName}}" class="img-fluid rounded border" alt="상품 이미지">
	        </div>

	        <!-- 오른쪽: 상세 정보 -->
	        <div class="col-md-6">
	            <h2 class="fw-bold mb-3" th:text="${product.name}">제품 이름</h2>
	            <p class="text-muted mb-1">제조사: 
	                <span th:text="${companyName}">제조사 이름</span>
	            </p>
	            <p class="h4 text-primary fw-bold mb-4">
	                [[${#numbers.formatInteger(product.price, 3, 'COMMA')}]]원
	            </p>

	            <!-- 구매 버튼 -->
	            <div class="d-grid gap-2">
					<button class="btn btn-primary btn-lg" id="payment"
					        th:attr="data-useremail=${user.email},
					                 data-username=${user.userName},
					                 data-productname=${product.name},
					                 data-price=${product.price}">
					    구매하기
					</button>
	                <button class="btn btn-outline-secondary">장바구니 담기</button>
	            </div>
	        </div>
	    </div>

	    <!-- 하단: 추가 정보 -->
		<div class="mt-5 pt-4 border-top">
		    <h5 class="fw-bold mb-3">추가 이미지</h5>
		    <th:block th:if="${files != null and !files.isEmpty()}">
		        <div class="row row-cols-1 row-cols-md-3 g-4">
		            <th:block th:each="fileName : ${product.files}">
		                <div class="col">
		                    <div class="card h-100">
		                        <img th:src="@{'/Images/' + ${fileName}}" class="card-img-top rounded" alt="추가 이미지" style="object-fit: cover; height: 250px;">
		                    </div>
		                </div>
		            </th:block>
		        </div>
		    </th:block>
		    <th:block th:if="${files == null or files.isEmpty()}">
		        <p class="text-muted">추가 이미지가 없습니다.</p>
		    </th:block>
		</div>
	</div>
	<!-- 포트원 결제 스크립트 삽입 -->
	<th:block layout:fragment="script">
	    <!-- 포트원 필수 스크립트 -->
	    <script src="https://cdn.iamport.kr/v1/iamport.js"></script>
	    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
	    <script src="https://cdn.iamport.kr/js/iamport.payment-1.2.0.js"></script>

	    <!-- 결제 처리용 로컬 JS -->
	    <script th:src="@{/js/payment.js}"></script>
	</th:block>
</html>